# ğŸ“„ API è¦æ ¼æ›¸ (V1.3)

## 1. èªè­‰èˆ‡ç”¨æˆ¶ç®¡ç† (Auth & Users API)
| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | é—œéµåƒæ•¸ / å‚™è¨» |
| :--- | :--- | :--- | :--- |
| **POST** | `/api/v1/users/` | ä½¿ç”¨è€…è¨»å†Š | {email, password} (åˆå§‹åŒ– Permissions) |
| **GET** | `/api/v1/users/verify` | é©—è­‰ä¿¡ç®± Token | Query: ?token=XYZ (å•Ÿç”¨ is_active) |
| **POST** | `/api/v1/auth/login` | ç™»å…¥ä¸¦ç™¼æ”¾ Token | Body(Form): username, password |
| **POST** | `/api/v1/auth/logout` | ç™»å‡ºç•¶å‰è¨­å‚™ | æ¸…é™¤ Session ç´€éŒ„ |
| **GET** | `/api/v1/auth/devices` | æŸ¥çœ‹ç™»å…¥ä¸­çš„è¨­å‚™æ¸…å–® | é¡¯ç¤º IPã€è¨­å‚™åç¨±ã€æœ€å¾Œæ´»å‹•æ™‚é–“ |

---

## 2. ç­†è¨˜èˆ‡å¯©æ ¸æµ (Notes API)
| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | æ¬Šé™è¦æ±‚ |
| :--- | :--- | :--- | :--- |
| **GET** | `/api/v1/notes/public` | ç²å–ã€Œå…¨ç«™å…¬é–‹ã€ç­†è¨˜åˆ—è¡¨ | **å…ç™»å…¥** (åƒ…é™å·²å¯©æ ¸å…§å®¹) |
| **GET** | `/api/v1/notes/me` | ç²å–ã€Œæˆ‘çš„ã€æ‰€æœ‰ç­†è¨˜ | éœ€ç™»å…¥ (å«ç§æœ‰/è‰ç¨¿) |
| **POST** | `/api/v1/notes/` | å»ºç«‹æ–°ç­†è¨˜ | éœ€ç™»å…¥ (can_post_note = True) |
| **PATCH** | `/api/v1/notes/{id}` | æ›´æ–°ç­†è¨˜å…§å®¹æˆ–ç‹€æ…‹ | ä½œè€…æœ¬äºº (è‡ªå‹•åˆ¤å®š sync_status) |
| **DELETE** | `/api/v1/notes/{id}` | åˆªé™¤ç­†è¨˜ | ä½œè€…æœ¬äºº |
| **GET** | `/api/v1/notes/{id}` | ç²å–å–®ç¯‡è©³ç´°å…§å®¹ | æ¬Šé™æª¢æŸ¥ (ç§æœ‰/å…¬é–‹åˆ¤å®š) |

---

## 3. ç¤¾äº¤èˆ‡å³æ™‚é€šè¨Š (Social & Chat API)
| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | å‚™è¨» |
| :--- | :--- | :--- | :--- |
| **GET** | `/api/v1/social/profiles/{uid}` | ç²å–ä»–äººå…¬é–‹ä¸»é è³‡æ–™ | æª¢æŸ¥ is_profile_public ç‹€æ…‹ |
| **POST** | `/api/v1/social/follows/{id}` | è¿½è¹¤ / å–æ¶ˆè¿½è¹¤ä½¿ç”¨è€… | ä¿®æ”¹ follows è¡¨ |
| **GET** | `/api/v1/chat/rooms` | ç²å–æ‰€æœ‰ç§è¨Šå°è©±æ¸…å–® | åŒ…å«æœ€å¾Œè¨Šæ¯èˆ‡æœªè®€æ•¸ |
| **POST** | `/api/v1/bottles/drop` | æ‰”å‡ºä¸€å€‹åŒ¿åæ¼‚æµç“¶ | å­˜å…¥ drift_bottles |

---

## 4. è¶…ç´šç®¡ç†å“¡å¾Œå° (Admin Portal API)
*éœ€é€šé is_superuser = True æª¢æŸ¥*
| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ | åŠŸèƒ½ |
| :--- | :--- | :--- | :--- |
| **GET** | `/api/v1/admin/users` | ç²å–å…¨ç«™ä½¿ç”¨è€…æ¸…å–® | è¯è¡¨æŸ¥è©¢ Permissions ç‹€æ…‹ |
| **PATCH** | `/api/v1/admin/users/{id}/permissions` | ä¿®æ”¹æ¬Šé™é–‹é—œ | èª¿æ•´ is_banned, can_post_note ç­‰ |
| **GET** | `/api/v1/admin/notes/pending` | ç²å–æ‰€æœ‰ã€Œå¾…å¯©æ ¸ã€çš„æ–‡ç«  | ç¯©é¸ sync_status = 1 çš„è³‡æ–™ |
| **POST** | `/api/v1/admin/notes/{id}/audit` | åŸ·è¡Œå¯©æ ¸å‹•ä½œ | è¦†è“‹ published_content ä¸¦æ­¸é›¶ç‹€æ…‹ |

---

## 5. å…±é€šå›æ‡‰æ ¼å¼ (Response Standard)
ç›®å‰é–‹ç™¼éšæ®µä»¥ FastAPI è‡ªå‹•ç”Ÿæˆçš„ Response ç‚ºä¸»ï¼Œå¾ŒçºŒè¦–éœ€æ±‚å°è£çµ±ä¸€æ ¼å¼ï¼š
(å¾…é–‹ç™¼å‰ç«¯æ™‚å„ªåŒ–)